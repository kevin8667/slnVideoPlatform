<div class="main p-grid p-nogutter">
  <div class="secend p-grid p-nogutter" *ngIf="memberData">
    <div class="cornercontainer col-1"></div>

    <div class="leftcontainer col-4">
      <div id="MemberModifyArea" class="modify-area">
        <div class="picdiv p-grid">
          <div class="profile-image-container">
            <img
                *ngIf="!memberData.photoPath"
                class="mpic"
                alt="avatar2"
                src="https://mdbcdn.b-cdn.net/img/new/avatars/1.webp" />
            <img *ngIf="memberData.photoPath" class="mpic" alt="avatar2" [src]="memberData.photoPath" />

            <div class="mpicdiv">
                <button class="edit-button">
                    <img src="./../../../assets/img/Member/edit.png" alt="Edit" (click)="onEditClick()"  />
                    <span>上傳圖片</span>
                </button>
            </div>


        </div>
        <div class="gradediv">
          <img
            class="gradepic"
            src="./../../../assets/img/Member/crown.png"
            alt="crown"
          />
          <label class="gradetxt">會員等級: {{ getMemberGradeDescription() }}</label>
        </div>
      </div>
        <table>
          <tr>
            <td><label>電子信箱:</label></td>
            <td>
              <label>{{ memberData.email }}</label>
            </td>
          </tr>
          <tr>
            <td><label>會員姓名:</label></td>
            <td>
              <ng-container *ngIf="canSee">
                <input
                  pInputText
                  class="p-inputtext-sm"
                  [(ngModel)]="memberData.memberName"
                  type="text"
                />
              </ng-container>
              <ng-container *ngIf="!canSee">
                <label>{{ memberData.memberName }}</label>
              </ng-container>
            </td>
          </tr>
          <tr>
            <td><label>密碼:</label></td>
            <td>
              <ng-container *ngIf="canSee"><ng-container *ngIf="canSeepwd">
                <input
                  pInputText
                  id="inputpwd"
                  class="p-inputtext-sm "
                  [(ngModel)]="memberData.password"
                  type="password"
                /><img [src]="canSeepwd ? './../../../assets/img/Member/light-off.png' : './../../../assets/img/Member/light-on.png'" (click)="seepwd()">
              </ng-container><ng-container *ngIf="!canSeepwd">
                <input
                pInputText
                id="inputpwd"
                class="p-inputtext-sm "
                [(ngModel)]="memberData.password"
                type="text"
              />

                <img  [src]="canSeepwd ? './../../../assets/img/Member/light-off.png' : './../../../assets/img/Member/light-on.png'" (click)="cantseepwd()">
              </ng-container>
              </ng-container>
              <ng-container *ngIf="!canSee">
                <label>{{ memberData.password }}</label>
              </ng-container>
            </td>
          </tr>
          <tr>
            <td><label>暱稱:</label></td>
            <td>
              <ng-container *ngIf="canSee">
                <input
                  pInputText
                  class="p-inputtext-sm"
                  [(ngModel)]="memberData.nickName"
                  type="text"
                />
              </ng-container>
              <ng-container *ngIf="!canSee">
                <label>{{ memberData.nickName }}</label>
              </ng-container>
            </td>
          </tr>
          <tr>
            <td><label>手機:</label></td>
            <td>
              <ng-container *ngIf="canSee">
                <input
                  pInputText
                  class="p-inputtext-sm"
                  [(ngModel)]="memberData.phone"
                  type="text"
                />
              </ng-container>
              <ng-container *ngIf="!canSee">
                <label>{{ memberData.phone }}</label>
              </ng-container>
            </td>
          </tr>
          <tr>
            <td><label>生日:</label></td>
            <td>
              <ng-container *ngIf="canSee">
                <input
                  pInputText
                  class="p-inputtext-sm"
                  [(ngModel)]="memberData.birth"
                  type="date"
                />
              </ng-container>
              <ng-container *ngIf="!canSee">
                <label>{{ memberData.birth | date : "yyyy-MM-dd" }}</label>
              </ng-container>
            </td>
          </tr>
          <tr>
            <td><label>地址:</label></td>
            <td>
              <ng-container *ngIf="canSee">
                <input
                  pInputText
                  class="p-inputtext-sm"
                  [(ngModel)]="memberData.address"
                  type="text"
                />
              </ng-container>
              <ng-container *ngIf="!canSee">
                <label>{{ memberData.address }}</label>
              </ng-container>
            </td>
          </tr>
          <tr>
            <td><label>性別:</label></td>
            <td>
              <ng-container *ngIf="canSee">
                <div class="flex flex-wrap gap-3">
                  <div class="flex align-items-center">
                    <p-radioButton
                      name="gender"
                      value="F"
                      [(ngModel)]="memberData.gender"
                      inputId="gender1"
                    ></p-radioButton>
                    <label for="gender1">女性</label>
                  </div>
                  <div class="flex align-items-center">
                    <p-radioButton
                      name="gender"
                      value="M"
                      [(ngModel)]="memberData.gender"
                      inputId="gender2"
                    ></p-radioButton>
                    <label for="gender2">男性</label>
                  </div>
                </div>
              </ng-container>
              <ng-container *ngIf="!canSee">
                <label>{{ getMemberGenderDescription() }}</label>
              </ng-container>
            </td>
          </tr>
          <tr>
            <td><label>積分:</label></td>
            <td>
              <label>{{ memberData.point }}</label>
            </td>
          </tr>
          <tr>
            <td><label>最後登入時間:</label></td>
            <td>
              <label>{{
                memberData.lastLoginDate | date : "yyyy-MM-dd"
              }}</label>
            </td>
          </tr>
          <tr>
            <td><label>註冊時間:</label></td>
            <td>
              <label>{{ memberData.registerDate | date : "yyyy-MM-dd" }}</label>
            </td>
            <div class="btncorner">

              <div
              class="btncancel"
                *ngIf="cantSee"
                (click)="modifyClick()"
              ><h4>
                修改會員資料</h4>
              </div>

              <div class="btncancel"
                *ngIf="canSee"
                (click)="SaveData()"><h4>
                確認修改</h4>
            </div>
              <div
              class="btncancel"
              *ngIf="canSee"
              (click)="Return()"><h4>
              取消修改</h4>
            </div>
            </div>
          </tr>
        </table>
      </div>


  </div>
    <div class="rightcontainer col-6 row-12">
      <div class="tree">
        <div class="brick col-6">
          <a class="link" (click)="onmessage()">
            <div class="txtbtn">
              <h2>我的通知</h2>
            </div>
          </a>
        </div>
        <div class="brick col-6">
          <a class="link" (click)="oncoupon()">
            <div class="txtbtn">
              <h2>我的優惠券</h2>
            </div>
          </a>
        </div>
      </div>
      <div class="tree">
        <div class="brick col-6">
          <a class="link" (click)="onhistory()">
            <div class="txtbtn">
              <h2>購物紀錄</h2>
            </div>
          </a>
        </div>
        <div class="brick col-6">
          <a class="link" (click)="onfriends()">
            <div class="txtbtn">
              <h2>我的好友</h2>
            </div>
          </a>
        </div>
      </div>
      <!-- 新增的最新消息區域 -->
      <div class="news-section col-12" *ngIf="latestNews.length">
        <h3>最新消息</h3>
        <ul class="news-list">
          <li *ngFor="let news of latestNews" class="news-item">
            <div class="news-header" (click)="toggleSummary(news.id)">
              <span class="news-date">{{
                news.date | date : "yyyy-MM-dd"
              }}</span>
              <span class="news-title">{{ news.title }}</span>
            </div>
            <p *ngIf="news.showSummary" class="news-summary">
              {{ news.summary }}...
            </p>
          </li>
        </ul>
      </div>
    </div>

    <div class="end col-1"><div></div></div>
  </div>
</div>
